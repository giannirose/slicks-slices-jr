{"version":3,"sources":["webpack:///./src/pages/order_jr.js"],"names":["OrderPage","pizzas","data","nodes","useForm","name","email","values","updateValue","usePizza","order","addToOrder","removeFromOrder","error","loading","message","submitOrder","title","onSubmit","htmlFor","type","id","value","onChange","className","map","pizza","key","width","height","fluid","image","asset","alt","size","onClick","formatMoney","calculatePizzaPrice","price","calculateOrderTotal","disabled","query"],"mappings":"2FAAA,+OAae,SAASA,EAAT,GAA8B,IACrCC,EADoC,EAARC,KACdD,OAAOE,MADe,EAIVC,YAAQ,CACtCC,KAAM,GACNC,MAAO,KAFDC,EAJkC,EAIlCA,OAAQC,EAJ0B,EAI1BA,YAJ0B,EAiBtCC,YAAS,CACXR,SACAM,WATAG,EAVwC,EAUxCA,MACAC,EAXwC,EAWxCA,WACAC,EAZwC,EAYxCA,gBACAC,EAbwC,EAaxCA,MACAC,EAdwC,EAcxCA,QACAC,EAfwC,EAexCA,QACAC,EAhBwC,EAgBxCA,YAMF,OAAID,EACK,wCAIP,oCACE,kBAAC,IAAD,CAAKE,MAAM,mBACX,kBAAC,IAAD,CAAaC,SAAUF,GAErB,kCACE,6CACA,2BAAOG,QAAQ,QAAf,OAEE,2BACEC,KAAK,OACLf,KAAK,OACLgB,GAAG,OACHC,MAAOf,EAAOF,KACdkB,SAAUf,KAGd,2BAAOW,QAAQ,SAAf,QAEE,2BACEC,KAAK,QACLf,KAAK,QACLgB,GAAG,QACHC,MAAOf,EAAOD,MACdiB,SAAUf,MAIhB,8BAAUgB,UAAU,QAClB,wCACCvB,EAAOwB,KAAI,SAACC,GAAD,OACV,kBAAC,IAAD,CAAgBC,IAAKD,EAAML,IACzB,kBAAC,IAAD,CACEO,MAAM,KACNC,OAAO,KACPC,MAAOJ,EAAMK,MAAMC,MAAMF,MACzBG,IAAKP,EAAMrB,OAEb,6BACE,4BAAKqB,EAAMrB,OAEb,6BACG,CAAC,IAAK,IAAK,KAAKoB,KAAI,SAACS,GAAD,OACnB,4BACEd,KAAK,SACLO,IAAKO,EACLC,QAAS,kBACPxB,EAAW,CACTU,GAAIK,EAAML,GACVa,WAIHA,EAVH,IAUUE,YAAYC,YAAoBX,EAAMY,MAAOJ,cAOjE,8BAAUV,UAAU,SAClB,yCACA,kBAAC,IAAD,CACEd,MAAOA,EACPT,OAAQA,EACRW,gBAAiBA,KAIrB,kCACE,6CACiBwB,YAAYG,YAAoB7B,EAAOT,KAExD,6BAAMY,EAAQ,qCAAWA,GAAa,IACtC,4BAAQO,KAAK,SAASoB,SAAU1B,GAC7BA,EAAU,mBAAqB,kBAQrC,IAAM2B,EAAK","file":"component---src-pages-order-jr-js-aa4699d615cb9e699f1e.js","sourcesContent":["import React, { useState } from 'react';\nimport { graphql } from 'gatsby';\nimport Img from 'gatsby-image';\nimport SEO from '../components/SEO';\nimport useForm from '../utils/useForm';\nimport calculatePizzaPrice from '../utils/calculatePizzaPrice';\nimport formatMoney from '../utils/formatMoney';\nimport OrderStyles from '../styles/OrderStyles';\nimport MenuItemStyles from '../styles/MenuItemStyles';\nimport usePizza from '../utils/usePizza';\nimport PizzaOrder from '../components/PizzaOrder';\nimport calculateOrderTotal from '../utils/calculateOrderTotal';\n\nexport default function OrderPage({ data }) {\n  const pizzas = data.pizzas.nodes;\n  // The following gets changed\n  // const [name, setName] = useState('');\n  const { values, updateValue } = useForm({\n    name: '',\n    email: '',\n  });\n\n  const {\n    order,\n    addToOrder,\n    removeFromOrder,\n    error,\n    loading,\n    message,\n    submitOrder,\n  } = usePizza({\n    pizzas,\n    values,\n  });\n\n  if (message) {\n    return <p>(message)</p>;\n  }\n\n  return (\n    <>\n      <SEO title=\"Order a Pizza!\" />\n      <OrderStyles onSubmit={submitOrder}>\n        {/* <form> */}\n        <fieldset>\n          <legend>Your Info</legend>\n          <label htmlFor=\"name\">\n            Name\n            <input\n              type=\"text\"\n              name=\"name\"\n              id=\"name\"\n              value={values.name}\n              onChange={updateValue}\n            />\n          </label>\n          <label htmlFor=\"email\">\n            email\n            <input\n              type=\"email\"\n              name=\"email\"\n              id=\"email\"\n              value={values.email}\n              onChange={updateValue}\n            />\n          </label>\n        </fieldset>\n        <fieldset className=\"menu\">\n          <legend>Menu</legend>\n          {pizzas.map((pizza) => (\n            <MenuItemStyles key={pizza.id}>\n              <Img\n                width=\"50\"\n                height=\"50\"\n                fluid={pizza.image.asset.fluid}\n                alt={pizza.name}\n              />\n              <div>\n                <h2>{pizza.name}</h2>\n              </div>\n              <div>\n                {['S', 'M', 'L'].map((size) => (\n                  <button\n                    type=\"button\"\n                    key={size}\n                    onClick={() =>\n                      addToOrder({\n                        id: pizza.id,\n                        size,\n                      })\n                    }\n                  >\n                    {size} {formatMoney(calculatePizzaPrice(pizza.price, size))}\n                  </button>\n                ))}\n              </div>\n            </MenuItemStyles>\n          ))}\n        </fieldset>\n        <fieldset className=\"order\">\n          <legend>Order</legend>\n          <PizzaOrder\n            order={order}\n            pizzas={pizzas}\n            removeFromOrder={removeFromOrder}\n          />\n        </fieldset>\n        {/* </form> */}\n        <fieldset>\n          <h3>\n            Your total is {formatMoney(calculateOrderTotal(order, pizzas))}\n          </h3>\n          <div>{error ? <p>Error: {error}</p> : ''}</div>\n          <button type=\"submit\" disabled={loading}>\n            {loading ? 'Placing Order...' : 'Order Ahead'}\n          </button>\n        </fieldset>\n      </OrderStyles>\n    </>\n  );\n}\n\nexport const query = graphql`\n  query {\n    pizzas: allSanityPizza {\n      nodes {\n        name\n        id\n        slug {\n          current\n        }\n        price\n        image {\n          asset {\n            # fixed(width: 600, height: 200) {\n            #   ...GatsbySanityImageFixed\n            # }\n            fluid(maxWidth: 100) {\n              ...GatsbySanityImageFluid\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n"],"sourceRoot":""}